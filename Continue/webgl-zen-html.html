<!-- WebGL Zen Space Container -->
<div id="zen-space-container"></div>

<!-- Yin-Yang Balance Indicator -->
<div id="balance-indicator">
  <svg viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg">
    <circle cx="50" cy="50" r="40" fill="black" stroke="white" stroke-width="2"/>
    <path d="M50,10 a40,40 0 0,1 0,80 a20,20 0 0,0 0,-40 a20,20 0 0,0 0,-40" fill="white"/>
    <circle cx="50" cy="30" r="5" fill="black"/>
    <circle cx="50" cy="70" r="5" fill="white"/>
  </svg>
</div>

<!-- Audio Controls -->
<div id="zen-audio-controls">
  <svg id="audio-on" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
    <path d="M3 9v6h4l5 5V4L7 9H3zm13.5 3c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02zM14 3.23v2.06c2.89.86 5 3.54 5 6.71s-2.11 5.85-5 6.71v2.06c4.01-.91 7-4.49 7-8.77s-2.99-7.86-7-8.77z"/>
  </svg>
  <svg id="audio-off" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" style="display:none;">
    <path d="M16.5 12c0-1.77-1.02-3.29-2.5-4.03v2.21l2.45 2.45c.03-.2.05-.41.05-.63zm2.5 0c0 .94-.2 1.82-.54 2.64l1.51 1.51C20.63 14.91 21 13.5 21 12c0-4.28-2.99-7.86-7-8.77v2.06c2.89.86 5 3.54 5 6.71zM4.27 3L3 4.27 7.73 9H3v6h4l5 5v-6.73l4.25 4.25c-.67.52-1.42.93-2.25 1.18v2.06c1.38-.31 2.63-.95 3.69-1.81L19.73 21 21 19.73l-9-9L4.27 3zM12 4L9.91 6.09 12 8.18V4z"/>
  </svg>
</div>

<!-- Loading Screen -->
<div id="zen-loading">
  <div class="loader"></div>
  <div class="text">Creating Zen Space...</div>
</div>

<!-- Chakra Info Template (will be cloned by JS) -->
<div id="chakra-info-template" class="chakra-info" style="display:none;">
  <h3 id="chakra-name"></h3>
  <p id="chakra-description"></p>
</div>

<!-- Include Three.js library and other dependencies -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.9.1/gsap.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/postprocessing/6.23.4/postprocessing.min.js"></script>

<!-- Load our WebGL Zen Space script -->
<script src="js/webgl-zen.js"></script>

<!-- Initialize Zen Space -->
<script>
  document.addEventListener('DOMContentLoaded', function() {
    // Hide book and container initially
    const bookContainer = document.querySelector('.book-container');
    if (bookContainer) {
      bookContainer.style.opacity = '0';
    }
    
    // Add zen font if not already in document
    if (!document.querySelector('link[href*="Zen+Old+Mincho"]')) {
      const link = document.createElement('link');
      link.rel = 'stylesheet';
      link.href = 'https://fonts.googleapis.com/css2?family=Zen+Old+Mincho&display=swap';
      document.head.appendChild(link);
    }
    
    // Wait for Three.js to load
    if (typeof THREE !== 'undefined') {
      // Initialize zen space
      ZenSpace.init('zen-space-container');
      
      // Add chakra data
      const chakraData = [
        {
          name: 'Root Chakra (Muladhara)',
          color: '#ff0000',
          description: 'Foundation and stability. Connects us to Earth and grounds our being.'
        },
        {
          name: 'Sacral Chakra (Svadhisthana)',
          color: '#ff7f00',
          description: 'Creativity and emotion. Center of pleasure, joy, and our connection to others.'
        },
        {
          name: 'Solar Plexus Chakra (Manipura)',
          color: '#ffff00',
          description: 'Personal power and will. Source of self-esteem, warrior energy, and autonomy.'
        },
        {
          name: 'Heart Chakra (Anahata)',
          color: '#00ff00',
          description: 'Love and compassion. Bridge between lower and higher chakras, connecting mind and body.'
        },
        {
          name: 'Throat Chakra (Vishuddha)',
          color: '#0000ff',
          description: 'Communication and expression. Enables us to speak our truth with clarity and confidence.'
        },
        {
          name: 'Third Eye Chakra (Ajna)',
          color: '#4b0082',
          description: 'Intuition and wisdom. Center of insight, imagination and our ability to see beyond illusion.'
        },
        {
          name: 'Crown Chakra (Sahasrara)',
          color: '#9400d3',
          description: 'Spirituality and consciousness. Connection to higher states of being and divine wisdom.'
        }
      ];
      
      // Setup chakra hover effects
      ZenSpace.chakraData = chakraData;
      
      // Fade out loading screen after initialization
      setTimeout(() => {
        const loadingScreen = document.getElementById('zen-loading');
        if (loadingScreen) {
          loadingScreen.style.opacity = '0';
          setTimeout(() => {
            loadingScreen.style.display = 'none';
            
            // Show book container with fade-in
            if (bookContainer) {
              bookContainer.style.transition = 'opacity 1.5s ease-in-out';
              bookContainer.style.opacity = '1';
            }
          }, 1500);
        }
      }, 3000);
      
      // Setup audio controls
      const audioControls = document.getElementById('zen-audio-controls');
      const audioOn = document.getElementById('audio-on');
      const audioOff = document.getElementById('audio-off');
      
      if (audioControls) {
        audioControls.addEventListener('click', function() {
          if (ZenSpace.audio.enabled) {
            // Disable audio
            ZenSpace.audio.enabled = false;
            audioOn.style.display = 'none';
            audioOff.style.display = 'block';
          } else {
            // Enable audio
            ZenSpace.audio.enabled = true;
            audioOn.style.display = 'block';
            audioOff.style.display = 'none';
            
            // Initialize audio if not already done
            if (!ZenSpace.audio.initialized) {
              ZenSpace.initAudio();
            }
          }
        });
      }
    } else {
      console.error('Three.js library not loaded');
    }
  });
</script>
